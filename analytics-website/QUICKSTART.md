# ğŸš€ å¿«é€Ÿå¯åŠ¨æŒ‡å—

## å‰ç½®è¦æ±‚

1. **Node.js 16+** - [ä¸‹è½½åœ°å€](https://nodejs.org/)
2. **MySQL 8.0+** - [ä¸‹è½½åœ°å€](https://dev.mysql.com/downloads/mysql/)
3. **Git** - [ä¸‹è½½åœ°å€](https://git-scm.com/)

## ğŸ—„ï¸ æ•°æ®åº“è®¾ç½®

### 1. å¯åŠ¨ MySQL æœåŠ¡

### 2. åˆ›å»ºæ•°æ®åº“
```sql
CREATE DATABASE r2app_analytics CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### 3. æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬
```bash
mysql -u root -p r2app_analytics < init-database.sql
```

## âš™ï¸ ç¯å¢ƒé…ç½®

### 1. å¤åˆ¶ç¯å¢ƒå˜é‡æ–‡ä»¶
```bash
cp env.example .env
```

### 2. ç¼–è¾‘ .env æ–‡ä»¶
```env
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=your_mysql_password
DB_NAME=r2app_analytics
DB_PORT=3306
PORT=3006
NODE_ENV=development

# Electronåº”ç”¨æ”¯æŒé…ç½®
ENABLE_ELECTRON_SUPPORT=true
ALLOW_ALL_ORIGINS=true
LOG_ELECTRON_REQUESTS=true
```

## ğŸ“¦ å®‰è£…ä¾èµ–

### 1. å®‰è£…åç«¯ä¾èµ–
```bash
npm install
```

### 2. å®‰è£…å‰ç«¯ä¾èµ–
```bash
cd client
npm install
cd ..
```

## ğŸš€ å¯åŠ¨åº”ç”¨

### æ–¹æ³• 1: ä½¿ç”¨æ‰¹å¤„ç†æ–‡ä»¶ï¼ˆæ¨èï¼‰
```bash
start-dev.bat
```

### æ–¹æ³• 2: æ‰‹åŠ¨å¯åŠ¨
```bash
# ç»ˆç«¯ 1: å¯åŠ¨åç«¯
npm run server

# ç»ˆç«¯ 2: å¯åŠ¨å‰ç«¯
npm run client
```

### æ–¹æ³• 3: åŒæ—¶å¯åŠ¨
```bash
npm run dev
```

## ğŸŒ è®¿é—®åœ°å€

- **å‰ç«¯ä»ªè¡¨ç›˜**: http://localhost:3000
- **åç«¯ API**: http://localhost:3006
- **å¥åº·æ£€æŸ¥**: http://localhost:3006/health

## ğŸ§ª æµ‹è¯• API

### æµ‹è¯•æ™®é€šAPI
```bash
node test-api.js
```

### æµ‹è¯•Electronåº”ç”¨å…¼å®¹æ€§
```bash
node test-electron-api.js
```

## ğŸ“± åœ¨ R2APP ä¸­é…ç½®

### 1. ä¿®æ”¹ analytics-config.js
```javascript
export const ANALYTICS_CONFIG = {
  // ç»Ÿè®¡æ¥å£åœ°å€ - æ”¹ä¸ºä½ çš„ç»Ÿè®¡ç½‘ç«™åœ°å€
  API_URL: 'http://localhost:3006/api/analytics',
  
  // æ˜¯å¦å¯ç”¨ç»Ÿè®¡
  ENABLED: true,
  
  // ç»Ÿè®¡è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  TIMEOUT: 10000,
  
  // é‡è¯•æ¬¡æ•°
  RETRY_COUNT: 3,
  
  // é‡è¯•é—´éš”ï¼ˆæ¯«ç§’ï¼‰
  RETRY_DELAY: 2000
};
```

### 2. ç¡®ä¿R2APPä¸­çš„è¯·æ±‚åŒ…å«æ­£ç¡®çš„User-Agent
åœ¨æ‚¨çš„R2APPä¸­ï¼Œç»Ÿè®¡è¯·æ±‚åº”è¯¥åŒ…å«ç±»ä¼¼è¿™æ ·çš„User-Agentï¼š
```javascript
headers: {
  'User-Agent': 'R2APP/1.0.0 (Electron/28.0.0)',
  'Content-Type': 'application/json'
}
```

## ğŸ”§ å¸¸è§é—®é¢˜

### 1. æ•°æ®åº“è¿æ¥å¤±è´¥
- æ£€æŸ¥ MySQL æœåŠ¡æ˜¯å¦å¯åŠ¨
- éªŒè¯æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç 
- ç¡®è®¤æ•°æ®åº“åç§°æ­£ç¡®

### 2. ç«¯å£è¢«å ç”¨
- ä¿®æ”¹ `.env` æ–‡ä»¶ä¸­çš„ `PORT` å€¼
- æˆ–è€…å…³é—­å ç”¨ç«¯å£çš„ç¨‹åº

### 3. å‰ç«¯æ— æ³•è¿æ¥åç«¯
- ç¡®è®¤åç«¯æœåŠ¡å™¨å·²å¯åŠ¨
- æ£€æŸ¥ `client/package.json` ä¸­çš„ `proxy` é…ç½®
- éªŒè¯ CORS è®¾ç½®

### 4. Electronåº”ç”¨è·¨åŸŸé—®é¢˜
- åç«¯å·²é…ç½®æ”¯æŒæ‰€æœ‰æ¥æºï¼ŒåŒ…æ‹¬Electronåº”ç”¨
- æ£€æŸ¥R2APPä¸­çš„ç½‘ç»œè¯·æ±‚é…ç½®
- ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„APIåœ°å€

## ğŸ“Š åŠŸèƒ½ç‰¹æ€§

- âœ… å®æ—¶ç»Ÿè®¡ä»ªè¡¨ç›˜
- âœ… å®‰è£…å’Œä½¿ç”¨æ•°æ®æ”¶é›†
- âœ… å¹³å°å’Œç‰ˆæœ¬åˆ†å¸ƒåˆ†æ
- âœ… å“åº”å¼è®¾è®¡
- âœ… é«˜æ€§èƒ½å›¾è¡¨å±•ç¤º
- âœ… è‡ªåŠ¨é‡è¯•æœºåˆ¶
- âœ… æ•°æ®æŒä¹…åŒ–å­˜å‚¨
- âœ… **Electronåº”ç”¨å®Œå…¨æ”¯æŒ**
- âœ… **è·¨åŸŸè¯·æ±‚å®Œå…¨æ”¯æŒ**

## ğŸ¯ ä¸‹ä¸€æ­¥

1. å¯åŠ¨åº”ç”¨å¹¶è®¿é—®ä»ªè¡¨ç›˜
2. åœ¨ R2APP ä¸­é…ç½®ç»Ÿè®¡æ¥å£
3. æµ‹è¯•æ•°æ®æ”¶é›†åŠŸèƒ½
4. æ ¹æ®éœ€è¦è‡ªå®šä¹‰å›¾è¡¨å’Œæ ·å¼
5. **éªŒè¯Electronåº”ç”¨çš„ç»Ÿè®¡æ•°æ®æ”¶é›†**

## ğŸ” Electronåº”ç”¨è°ƒè¯•

å¦‚æœæ‚¨çš„R2APPä»ç„¶æ— æ³•å‘é€ç»Ÿè®¡æ•°æ®ï¼Œè¯·æ£€æŸ¥ï¼š

1. **ç½‘ç»œè¯·æ±‚æ—¥å¿—** - æŸ¥çœ‹R2APPæ§åˆ¶å°çš„ç½‘ç»œè¯·æ±‚
2. **CORSé”™è¯¯** - æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰è·¨åŸŸé”™è¯¯
3. **APIåœ°å€** - ç¡®è®¤APIåœ°å€æ­£ç¡®ä¸”å¯è®¿é—®
4. **è¯·æ±‚å¤´** - ç¡®ä¿åŒ…å«æ­£ç¡®çš„Content-Type
5. **é˜²ç«å¢™** - æ£€æŸ¥æœ¬åœ°é˜²ç«å¢™æ˜¯å¦é˜»æ­¢äº†è¯·æ±‚

---

**éœ€è¦å¸®åŠ©ï¼Ÿ** è¯·æŸ¥çœ‹ `README.md` æˆ–æäº¤ Issueã€‚
